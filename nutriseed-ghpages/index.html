<!DOCTYPE html>
<!--
  NutriSeed Web App
  ------------------
  Calculadora de deficiencias nutricionales para cultivos agrícolas.

  Esta aplicación permite al usuario ingresar los resultados de un análisis de suelo
  para nitrógeno (N), fósforo (P) y potasio (K) y calcular la deficiencia
  nutricional en función del cultivo seleccionado y la condición climática del año.

  El diseño utiliza glassmorphism sobre un fondo degradado, con un esquema
  responsivo para una visualización cómoda en dispositivos móviles y de escritorio.

  Autor: ChatGPT (OpenAI)
  © 2025 NutriSeed
-->
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NutriSeed – Calculadora de Deficiencias Nutricionales</title>
    <link rel="icon" href="assets/favicon.png" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#00a86b"/>
    <style>
      :root {
        --card-bg: rgba(255, 255, 255, 0.25);
        --border-color: rgba(255, 255, 255, 0.3);
        --accent-color: #00a86b;
        --text-color: #ffffff;
      }

      body {
        margin: 0;
        padding: 0;
        font-family: Arial, Helvetica, sans-serif;
        background: linear-gradient(135deg, #4fc3f7, #a7ffeb);
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        box-sizing: border-box;
      }

      .app-wrapper {
        backdrop-filter: blur(15px);
        background: var(--card-bg);
        border-radius: 2rem;
        border: 1px solid var(--border-color);
        box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        padding: 2rem;
        width: 100%;
        max-width: 600px;
        display: flex;
        flex-direction: column;
        box-sizing: border-box;
      }

      h1 {
        text-align: center;
        color: var(--text-color);
        margin-bottom: 1rem;
        font-size: 2rem;
      }

      label {
        display: block;
        margin-top: 1rem;
        font-weight: 600;
        color: var(--text-color);
      }

      input,
      select {
        width: 100%;
        padding: 0.6rem 0.8rem;
        margin-top: 0.4rem;
        border-radius: 0.8rem;
        border: 1px solid var(--border-color);
        background: rgba(255, 255, 255, 0.4);
        color: #333;
        font-size: 1rem;
        box-sizing: border-box;
      }

      button {
        width: 100%;
        padding: 0.8rem;
        margin-top: 1.5rem;
        border-radius: 1rem;
        border: none;
        background: linear-gradient(145deg, var(--accent-color), #007d4a);
        color: #fff;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.1s ease;
      }

      button:active {
        transform: scale(0.98);
      }

      .result {
        margin-top: 1.5rem;
        padding: 1rem;
        border-radius: 1rem;
        background: rgba(255, 255, 255, 0.3);
        color: var(--text-color);
        display: none;
        line-height: 1.6;
      }

      footer {
        margin-top: 2rem;
        text-align: center;
        color: var(--text-color);
        font-size: 0.9rem;
      }

      @media (max-width: 600px) {
        .app-wrapper {
          padding: 1.5rem;
          border-radius: 1.5rem;
        }
        h1 {
          font-size: 1.6rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="app-wrapper">
      <h1>NutriSeed</h1>
      <form id="nutriForm">
        <label for="crop">Cultivo</label>
        <select id="crop" required>
          <option value="" disabled selected>Selecciona un cultivo</option>
          <option value="soja">Soja</option>
          <option value="trigo">Trigo</option>
          <option value="maiz">Maíz</option>
          <option value="girasol">Girasol</option>
          <option value="mani">Maní</option>
          <option value="cebada">Cebada</option>
          <option value="lenteja">Lenteja</option>
          <option value="arveja">Arveja</option>
          <option value="picingallo">Maíz Picingallo</option>
          <option value="algodon">Algodón</option>
        </select>

        <label for="yearType">Condición del año</label>
        <select id="yearType" required>
          <option value="" disabled selected>Selecciona una condición</option>
          <option value="seco">Seco</option>
          <option value="neutro">Neutro</option>
          <option value="humedo">Húmedo</option>
        </select>

        <label for="nVal">Análisis Nitrógeno (N)</label>
        <input
          type="number"
          id="nVal"
          placeholder="Ingresa N (ppm, mg/kg o unidad equivalente)"
          step="0.01"
          min="0"
          required
        />

        <label for="pVal">Análisis Fósforo (P)</label>
        <input
          type="number"
          id="pVal"
          placeholder="Ingresa P (ppm, mg/kg o unidad equivalente)"
          step="0.01"
          min="0"
          required
        />

        <label for="kVal">Análisis Potasio (K)</label>
        <input
          type="number"
          id="kVal"
          placeholder="Ingresa K (ppm, mg/kg o unidad equivalente)"
          step="0.01"
          min="0"
          required
        />

        <button type="submit">Calcular deficiencias</button>
      </form>

      <div id="result" class="result"></div>

      <footer>&copy; 2025 NutriSeed</footer>
    </div>

    <script>
      const baseRecommendations = {
        soja: { N: 35, P: 45, K: 100 },
        trigo: { N: 40, P: 30, K: 50 },
        maiz: { N: 60, P: 35, K: 80 },
        girasol: { N: 25, P: 40, K: 60 },
        mani: { N: 20, P: 25, K: 30 },
        cebada: { N: 35, P: 25, K: 40 },
        lenteja: { N: 20, P: 30, K: 20 },
        arveja: { N: 20, P: 35, K: 30 },
        picingallo: { N: 50, P: 30, K: 60 },
        algodon: { N: 45, P: 25, K: 70 },
      };

      const yearMultipliers = {
        seco: 1.1,
        neutro: 1.0,
        humedo: 0.9,
      };

      function formatNumber(value) {
        return value.toFixed(2);
      }

      function calculateDeficiency(recommended, actual) {
        const diff = recommended - actual;
        return diff > 0 ? diff : 0;
      }

      const form = document.getElementById('nutriForm');
      const resultContainer = document.getElementById('result');

      form.addEventListener('submit', function (event) {
        event.preventDefault();

        const cropKey = document.getElementById('crop').value;
        const yearKey = document.getElementById('yearType').value;
        const nVal = parseFloat(document.getElementById('nVal').value);
        const pVal = parseFloat(document.getElementById('pVal').value);
        const kVal = parseFloat(document.getElementById('kVal').value);

        if (!cropKey || !yearKey || isNaN(nVal) || isNaN(pVal) || isNaN(kVal)) {
          alert('Por favor, completa todos los campos correctamente.');
          return;
        }

        const base = baseRecommendations[cropKey];
        const multiplier = yearMultipliers[yearKey];

        const recN = base.N * multiplier;
        const recP = base.P * multiplier;
        const recK = base.K * multiplier;

        const defN = calculateDeficiency(recN, nVal);
        const defP = calculateDeficiency(recP, pVal);
        const defK = calculateDeficiency(recK, kVal);

        const resultHtml = `
          <h3>Resultados para ${cropKey.charAt(0).toUpperCase() + cropKey.slice(1)}</h3>
          <p><strong>Condición del año:</strong> ${yearKey.charAt(0).toUpperCase() + yearKey.slice(1)}</p>
          <p><strong>Recomendaciones ajustadas (N‑P‑K):</strong> ${formatNumber(recN)} - ${formatNumber(recP)} - ${formatNumber(recK)}</p>
          <p><strong>Valores medidos (N‑P‑K):</strong> ${formatNumber(nVal)} - ${formatNumber(pVal)} - ${formatNumber(kVal)}</p>
          <p><strong>Deficiencia estimada:</strong></p>
          <ul>
            <li>Nitrógeno (N): ${formatNumber(defN)}</li>
            <li>Fósforo (P): ${formatNumber(defP)}</li>
            <li>Potasio (K): ${formatNumber(defK)}</li>
          </ul>
          <p>Una deficiencia de 0 significa que el suelo contiene al menos la cantidad recomendada de ese nutriente.</p>
        `;

        resultContainer.innerHTML = resultHtml;
        resultContainer.style.display = 'block';
      });
    </script>
  </body>
</html>
